<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP Tools Optimization Plan - JobNimbus Integration</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .alert-badge {
            display: inline-block;
            background: #ef4444;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            margin-top: 15px;
            font-size: 1.1em;
        }

        .content {
            padding: 40px;
        }

        .executive-summary {
            background: #fef3c7;
            border-left: 5px solid #f59e0b;
            padding: 25px;
            margin-bottom: 40px;
            border-radius: 5px;
        }

        .executive-summary h2 {
            color: #f59e0b;
            margin-bottom: 15px;
        }

        .executive-summary ul {
            margin-left: 20px;
        }

        .executive-summary li {
            margin-bottom: 10px;
            font-weight: 500;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .stat-card.danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        .stat-card.warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
        }

        .stat-card.success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .stat-card.info {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        h2 {
            color: #667eea;
            font-size: 1.8em;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        h3 {
            color: #764ba2;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 14px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background: #667eea;
            color: white;
            font-weight: bold;
            position: sticky;
            top: 0;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .priority-high {
            background: #fee2e2;
            color: #991b1b;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .priority-medium {
            background: #fef3c7;
            color: #92400e;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .priority-low {
            background: #dbeafe;
            color: #1e40af;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .impact-high {
            color: #059669;
            font-weight: bold;
        }

        .impact-medium {
            color: #d97706;
            font-weight: bold;
        }

        .impact-low {
            color: #6b7280;
            font-weight: bold;
        }

        .action-card {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .action-card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .action-list {
            list-style: none;
            padding: 0;
        }

        .action-list li {
            padding: 8px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .action-list li:before {
            content: "‚û§ ";
            color: #667eea;
            font-weight: bold;
            margin-right: 10px;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: bold;
            margin-right: 5px;
        }

        .badge-native {
            background: #d1fae5;
            color: #065f46;
        }

        .badge-custom {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-missing {
            background: #fee2e2;
            color: #991b1b;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .comparison-box {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .comparison-box h3 {
            margin-top: 0;
        }

        .comparison-box ul {
            margin-left: 20px;
        }

        .comparison-box li {
            margin-bottom: 8px;
        }

        .timestamp {
            text-align: center;
            color: #666;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            font-size: 0.9em;
        }

        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .toc h3 {
            margin-top: 0;
        }

        .toc ul {
            list-style: none;
        }

        .toc li {
            padding: 5px 0;
        }

        .toc a {
            color: #667eea;
            text-decoration: none;
        }

        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîß MCP Tools Optimization Plan</h1>
            <p class="subtitle">JobNimbus Integration Analysis & Recommendations</p>
            <div class="alert-badge">‚ö†Ô∏è CRITICAL: 111 Tools vs 13 Native Resources</div>
        </header>

        <div class="content">
            <div class="executive-summary">
                <h2>üìä Executive Summary</h2>
                <p><strong>Current State:</strong> The MCP implementation has grown to 111 tools, but JobNimbus only defines 13 native API resources. This 8.5x expansion creates significant technical debt, token waste, and maintenance overhead.</p>
                <br>
                <p><strong>Key Findings:</strong></p>
                <ul>
                    <li>üî¥ <strong>35 Analytics Tools (32% of total)</strong> - ALL custom, NOT native API endpoints</li>
                    <li>üü° <strong>13 Quick Status Tools</strong> - Redundant wrappers around search_jobs</li>
                    <li>üü° <strong>11 Materials Tools</strong> - Custom calculations, not API-backed</li>
                    <li>üî¥ <strong>WorkOrders Resource MISSING</strong> - Native resource not implemented</li>
                    <li>üü¢ <strong>Potential 40-50% reduction</strong> without losing functionality</li>
                </ul>
            </div>

            <div class="stats">
                <div class="stat-card danger">
                    <div class="stat-number">111</div>
                    <div class="stat-label">Current Tools</div>
                </div>
                <div class="stat-card info">
                    <div class="stat-number">13</div>
                    <div class="stat-label">Native Resources</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-number">8.5x</div>
                    <div class="stat-label">Expansion Factor</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-number">55-65</div>
                    <div class="stat-label">Target Tool Count</div>
                </div>
            </div>

            <div class="toc">
                <h3>üìã Table of Contents</h3>
                <ul>
                    <li><a href="#native-comparison">1. Native vs Current Implementation</a></li>
                    <li><a href="#tool-categorization">2. Tool Categorization Analysis</a></li>
                    <li><a href="#optimization-recommendations">3. Optimization Recommendations</a></li>
                    <li><a href="#consolidation-plan">4. Consolidation Plan</a></li>
                    <li><a href="#implementation-roadmap">5. Implementation Roadmap</a></li>
                    <li><a href="#risk-assessment">6. Risk Assessment</a></li>
                </ul>
            </div>

            <section id="native-comparison">
                <h2>1. Native vs Current Implementation</h2>

                <div class="comparison-grid">
                    <div class="comparison-box">
                        <h3>üéØ Native JobNimbus Resources (13)</h3>
                        <ul>
                            <li><span class="badge badge-native">NATIVE</span> Contacts</li>
                            <li><span class="badge badge-native">NATIVE</span> Jobs</li>
                            <li><span class="badge badge-native">NATIVE</span> Tasks</li>
                            <li><span class="badge badge-native">NATIVE</span> Activities</li>
                            <li><span class="badge badge-native">NATIVE</span> Files</li>
                            <li><span class="badge badge-native">NATIVE</span> Products</li>
                            <li><span class="badge badge-native">NATIVE</span> MaterialOrders</li>
                            <li><span class="badge badge-missing">MISSING</span> WorkOrders</li>
                            <li><span class="badge badge-native">NATIVE</span> Estimates (Legacy)</li>
                            <li><span class="badge badge-native">NATIVE</span> Invoices</li>
                            <li><span class="badge badge-native">NATIVE</span> Payments</li>
                            <li><span class="badge badge-native">NATIVE</span> Budgets (Legacy)</li>
                            <li><span class="badge badge-native">NATIVE</span> Account</li>
                        </ul>
                    </div>

                    <div class="comparison-box">
                        <h3>üîß Current Implementation (111 Tools)</h3>
                        <ul>
                            <li>‚úÖ Core CRUD: 29 tools (26%)</li>
                            <li>‚ö†Ô∏è Analytics: 35 tools (32%) <span class="badge badge-custom">CUSTOM</span></li>
                            <li>‚úÖ System: 4 tools (4%)</li>
                            <li>‚úÖ Attachments: 4 tools (4%)</li>
                            <li>‚ö†Ô∏è Business Intelligence: 1 tool (1%) <span class="badge badge-custom">CUSTOM</span></li>
                            <li>‚ö†Ô∏è Materials: 11 tools (10%) <span class="badge badge-custom">CUSTOM</span></li>
                            <li>‚úÖ Invoices: 1 tool (1%)</li>
                            <li>‚úÖ Budgets: 1 tool (1%)</li>
                            <li>‚úÖ Products: 2 tools (2%)</li>
                            <li>‚úÖ Material Orders: 5 tools (4%)</li>
                            <li>‚úÖ Payments: 2 tools (2%)</li>
                            <li>‚úÖ Account: 11 tools (10%)</li>
                            <li>‚ùå WorkOrders: 0 tools <span class="badge badge-missing">MISSING</span></li>
                        </ul>
                    </div>
                </div>

                <h3>Critical Gap Analysis</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Native Resource</th>
                            <th>Status</th>
                            <th>Tool Count</th>
                            <th>Assessment</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Contacts</td>
                            <td>‚úÖ Implemented</td>
                            <td>4 tools</td>
                            <td>Good coverage</td>
                        </tr>
                        <tr>
                            <td>Jobs</td>
                            <td>‚ö†Ô∏è Over-implemented</td>
                            <td>19 tools</td>
                            <td>Too many status wrappers</td>
                        </tr>
                        <tr>
                            <td>Tasks</td>
                            <td>‚úÖ Implemented</td>
                            <td>3 tools</td>
                            <td>Good coverage</td>
                        </tr>
                        <tr>
                            <td>Activities</td>
                            <td>‚úÖ Implemented</td>
                            <td>5 tools</td>
                            <td>Good coverage</td>
                        </tr>
                        <tr>
                            <td>Files</td>
                            <td>‚ö†Ô∏è Over-implemented</td>
                            <td>4 tools</td>
                            <td>2 custom analysis tools</td>
                        </tr>
                        <tr>
                            <td>Products</td>
                            <td>‚úÖ Implemented</td>
                            <td>2 tools</td>
                            <td>Good coverage</td>
                        </tr>
                        <tr>
                            <td>MaterialOrders</td>
                            <td>‚úÖ Implemented</td>
                            <td>5 tools</td>
                            <td>Full CRUD coverage</td>
                        </tr>
                        <tr>
                            <td>WorkOrders</td>
                            <td>‚ùå Missing</td>
                            <td>0 tools</td>
                            <td><strong>CRITICAL: Not implemented</strong></td>
                        </tr>
                        <tr>
                            <td>Estimates (Legacy)</td>
                            <td>‚úÖ Implemented</td>
                            <td>5 tools</td>
                            <td>Full CRUD coverage</td>
                        </tr>
                        <tr>
                            <td>Invoices</td>
                            <td>‚ö†Ô∏è Under-implemented</td>
                            <td>1 tool</td>
                            <td>Only GET, missing CRUD</td>
                        </tr>
                        <tr>
                            <td>Payments</td>
                            <td>‚ö†Ô∏è Under-implemented</td>
                            <td>2 tools</td>
                            <td>Only GET/CREATE</td>
                        </tr>
                        <tr>
                            <td>Budgets (Legacy)</td>
                            <td>‚ö†Ô∏è Under-implemented</td>
                            <td>1 tool</td>
                            <td>Only GET, read-only</td>
                        </tr>
                        <tr>
                            <td>Account</td>
                            <td>‚úÖ Implemented</td>
                            <td>11 tools</td>
                            <td>Comprehensive coverage</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section id="tool-categorization">
                <h2>2. Tool Categorization Analysis</h2>

                <h3>‚úÖ KEEP - Native API Tools (46 tools)</h3>
                <div class="action-card">
                    <h4>Core CRUD Operations - Align with Native Resources</h4>
                    <p><strong>Recommendation:</strong> Keep all tools that directly map to JobNimbus API endpoints</p>
                    <ul class="action-list">
                        <li>Contacts: get_contacts, get_contact, search_contacts, create_contact (4)</li>
                        <li>Jobs: get_jobs, search_jobs, get_job, search_job_notes, get_job_tasks (5)</li>
                        <li>Tasks: get_tasks, get_task, update_task (3)</li>
                        <li>Activities: get_activities, get_activity, create_activity (3)</li>
                        <li>Files: get_attachments, get_file_by_id (2)</li>
                        <li>Estimates: get_estimates, get_estimate, create_estimate, update_estimate, delete_estimate (5)</li>
                        <li>Products: get_product, get_products (2)</li>
                        <li>MaterialOrders: get_material_order, get_material_orders, create_material_order, update_material_order, delete_material_order (5)</li>
                        <li>Invoices: get_invoices (1)</li>
                        <li>Payments: get_payments, create_payment (2)</li>
                        <li>Budgets: get_budgets (1)</li>
                        <li>Account: get_account_settings + 10 creation tools (11)</li>
                        <li>System: validate_api_key, get_users (2)</li>
                    </ul>
                </div>

                <h3>üîÑ CONSOLIDATE - Quick Status Tools (13 ‚Üí 1 tool)</h3>
                <div class="action-card">
                    <h4>Status: High Priority | Impact: High (12 fewer tools)</h4>
                    <p><strong>Problem:</strong> 13 separate tools that are just wrappers around search_jobs with different status filters</p>
                    <p><strong>Solution:</strong> Replace with single parameterized tool: <code>search_jobs_by_status(status, limit)</code></p>
                    <ul class="action-list">
                        <li>Remove: get_leads ‚Üí search_jobs_by_status(status="Lead")</li>
                        <li>Remove: get_pending_approval ‚Üí search_jobs_by_status(status="Pending Customer Approval")</li>
                        <li>Remove: get_lost_jobs ‚Üí search_jobs_by_status(status="Lost")</li>
                        <li>Remove: get_in_progress ‚Üí search_jobs_by_status(status="Jobs In Progress")</li>
                        <li>Remove: get_completed ‚Üí search_jobs_by_status(status="Completed")</li>
                        <li>Remove: get_paid_closed ‚Üí search_jobs_by_status(status="Paid & Closed")</li>
                        <li>Remove: get_estimating ‚Üí search_jobs_by_status(status="Estimating")</li>
                        <li>Remove: get_signed_contracts ‚Üí search_jobs_by_status(status="Signed Contract")</li>
                        <li>Remove: get_scheduled ‚Üí search_jobs_by_status(status="Scheduled")</li>
                        <li>Remove: get_appointments ‚Üí search_jobs_by_status(status="Appointment")</li>
                        <li>Remove: get_invoiced ‚Üí search_jobs_by_status(status="Invoiced")</li>
                        <li>Remove: get_deposits ‚Üí search_jobs_by_status(status="Deposit")</li>
                    </ul>
                    <p><strong>Token Savings:</strong> ~15-20% reduction in tool listing</p>
                </div>

                <h3>‚ö†Ô∏è EVALUATE - Analytics Tools (35 tools)</h3>
                <div class="action-card">
                    <h4>Status: Medium Priority | Impact: Very High (potentially 20-25 fewer tools)</h4>
                    <p><strong>Problem:</strong> ALL 35 analytics tools are custom business logic, NOT native API endpoints. They aggregate existing data and perform calculations.</p>
                    <p><strong>Recommendation:</strong> Evaluate usage and value. Consider moving to separate "Business Intelligence Layer"</p>

                    <h4>Categories to Evaluate:</h4>
                    <ul class="action-list">
                        <li><strong>Insurance & Retail Pipelines (3 tools)</strong> - Likely HIGH VALUE for business insights</li>
                        <li><strong>Financial Analytics (7 tools)</strong> - Likely HIGH VALUE for reporting</li>
                        <li><strong>Performance & Forecasting (2 tools)</strong> - Likely HIGH VALUE for planning</li>
                        <li><strong>Job & Territory (8 tools)</strong> - MEDIUM VALUE, some may be redundant</li>
                        <li><strong>Task & User (3 tools)</strong> - MEDIUM VALUE, overlap with native data</li>
                        <li><strong>Communication & Conversion (5 tools)</strong> - LOW VALUE, can be replaced with queries</li>
                        <li><strong>Project & Operations (5 tools)</strong> - LOW VALUE, too generic</li>
                        <li><strong>Sales & Competition (2 tools)</strong> - MEDIUM VALUE</li>
                    </ul>

                    <p><strong>Suggested Action:</strong></p>
                    <ul class="action-list">
                        <li><strong>Keep (15 tools):</strong> Insurance, Financial, Performance categories</li>
                        <li><strong>Archive (10 tools):</strong> Communication, Project, Operations categories</li>
                        <li><strong>Consolidate (10 tools):</strong> Job & Territory into 3-4 parameterized tools</li>
                    </ul>
                    <p><strong>Net Result:</strong> 35 ‚Üí 18 tools (17 fewer tools)</p>
                </div>

                <h3>üîÑ CONSOLIDATE - Materials Tools (11 ‚Üí 5 tools)</h3>
                <div class="action-card">
                    <h4>Status: Medium Priority | Impact: Medium (6 fewer tools)</h4>
                    <p><strong>Problem:</strong> 11 tools split between tracking (4) and calculations (7). Calculations are custom formulas, not API calls.</p>

                    <h4>Current Tools:</h4>
                    <ul class="action-list">
                        <li>Tracking: get_estimate_materials, analyze_material_costs, get_material_usage_report, get_material_inventory_insights</li>
                        <li>Calculations: calculate_roofing_materials, calculate_siding_materials, estimate_materials_from_job, calculate_waste_factors, optimize_material_orders, get_material_specifications, compare_material_alternatives</li>
                    </ul>

                    <p><strong>Consolidation Plan:</strong></p>
                    <ul class="action-list">
                        <li><strong>Keep:</strong> get_estimate_materials (native API integration)</li>
                        <li><strong>Merge 3 ‚Üí 1:</strong> analyze_material_costs + get_material_usage_report + get_material_inventory_insights ‚Üí <code>get_material_analytics(analysis_type)</code></li>
                        <li><strong>Merge 7 ‚Üí 3:</strong> Group calculations by domain:
                            <ul style="margin-left: 30px; margin-top: 10px;">
                                <li><code>calculate_construction_materials(type, measurements)</code> - roofing, siding</li>
                                <li><code>optimize_materials(job_id, options)</code> - waste factors, order optimization</li>
                                <li><code>compare_materials(materials, criteria)</code> - specifications, alternatives</li>
                            </ul>
                        </li>
                    </ul>
                    <p><strong>Net Result:</strong> 11 ‚Üí 5 tools (6 fewer tools)</p>
                </div>

                <h3>üóëÔ∏è REMOVE - Redundant Custom Tools (2 tools)</h3>
                <div class="action-card">
                    <h4>Status: High Priority | Impact: Low (2 fewer tools)</h4>
                    <ul class="action-list">
                        <li><strong>analyze_job_attachments:</strong> Functionality covered by get_attachments with AI analysis</li>
                        <li><strong>search_insurance_jobs:</strong> Can be replaced with search_jobs_enhanced filters</li>
                    </ul>
                </div>

                <h3>‚ûï ADD - Missing Native Resources (5-7 tools)</h3>
                <div class="action-card">
                    <h4>Status: CRITICAL Priority | Impact: Complete native resource coverage</h4>
                    <p><strong>WorkOrders Resource - COMPLETELY MISSING</strong></p>
                    <ul class="action-list">
                        <li>Add: get_work_orders (list with pagination)</li>
                        <li>Add: get_work_order (individual by JNID)</li>
                        <li>Add: create_work_order</li>
                        <li>Add: update_work_order</li>
                        <li>Add: delete_work_order</li>
                    </ul>
                    <p><strong>Complete Native Resource Coverage</strong></p>
                    <ul class="action-list">
                        <li>Consider: Full CRUD for Invoices (currently only GET)</li>
                        <li>Consider: Full CRUD for Payments (currently only GET/CREATE)</li>
                    </ul>
                </div>

                <h3>üîÑ IMPROVE - Activities Specialization (2 ‚Üí 0 tools removed)</h3>
                <div class="action-card">
                    <h4>Status: Low Priority | Impact: Keep but consider merging</h4>
                    <ul class="action-list">
                        <li>get_calendar_activities - Specialized view for calendar integration</li>
                        <li>get_timeline_data - Specialized view for project timelines</li>
                    </ul>
                    <p><strong>Recommendation:</strong> Keep as convenience wrappers but document they use get_activities underneath</p>
                </div>
            </section>

            <section id="optimization-recommendations">
                <h2>3. Optimization Recommendations</h2>

                <table>
                    <thead>
                        <tr>
                            <th>Action</th>
                            <th>Category</th>
                            <th>Impact</th>
                            <th>Priority</th>
                            <th>Effort</th>
                            <th>Tools Delta</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Consolidate Quick Status Tools</td>
                            <td>Jobs</td>
                            <td><span class="impact-high">High</span></td>
                            <td><span class="priority-high">HIGH</span></td>
                            <td>Low</td>
                            <td>-12 tools</td>
                        </tr>
                        <tr>
                            <td>Archive Low-Value Analytics</td>
                            <td>Analytics</td>
                            <td><span class="impact-high">Very High</span></td>
                            <td><span class="priority-medium">MEDIUM</span></td>
                            <td>Medium</td>
                            <td>-17 tools</td>
                        </tr>
                        <tr>
                            <td>Consolidate Materials Tools</td>
                            <td>Materials</td>
                            <td><span class="impact-medium">Medium</span></td>
                            <td><span class="priority-medium">MEDIUM</span></td>
                            <td>Medium</td>
                            <td>-6 tools</td>
                        </tr>
                        <tr>
                            <td>Remove Redundant Custom Tools</td>
                            <td>Multiple</td>
                            <td><span class="impact-low">Low</span></td>
                            <td><span class="priority-high">HIGH</span></td>
                            <td>Low</td>
                            <td>-2 tools</td>
                        </tr>
                        <tr>
                            <td>Implement WorkOrders</td>
                            <td>Core CRUD</td>
                            <td><span class="impact-high">High</span></td>
                            <td><span class="priority-high">CRITICAL</span></td>
                            <td>Medium</td>
                            <td>+5 tools</td>
                        </tr>
                        <tr>
                            <td>Complete Invoices/Payments CRUD</td>
                            <td>Core CRUD</td>
                            <td><span class="impact-medium">Medium</span></td>
                            <td><span class="priority-low">LOW</span></td>
                            <td>Low</td>
                            <td>+4 tools</td>
                        </tr>
                        <tr>
                            <td><strong>TOTAL NET CHANGE</strong></td>
                            <td><strong>All</strong></td>
                            <td><strong class="impact-high">Very High</strong></td>
                            <td><strong>-</strong></td>
                            <td><strong>-</strong></td>
                            <td><strong>-28 tools</strong></td>
                        </tr>
                    </tbody>
                </table>

                <h3>Expected Outcome</h3>
                <div class="stats">
                    <div class="stat-card danger">
                        <div class="stat-number">111</div>
                        <div class="stat-label">Current Tools</div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-number">-37</div>
                        <div class="stat-label">Tools Removed</div>
                    </div>
                    <div class="stat-card info">
                        <div class="stat-number">+9</div>
                        <div class="stat-label">Tools Added</div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-number">83</div>
                        <div class="stat-label">Optimized Count</div>
                    </div>
                </div>

                <h3>Token Usage Impact</h3>
                <div class="action-card">
                    <h4>Estimated Token Savings</h4>
                    <ul class="action-list">
                        <li><strong>Tool Listing Reduction:</strong> 25% fewer tools = ~2,500-3,000 tokens saved per request</li>
                        <li><strong>Description Optimization:</strong> Consolidated tools have single comprehensive descriptions</li>
                        <li><strong>Context Window:</strong> More room for actual data and responses</li>
                        <li><strong>Performance:</strong> Faster tool selection by AI (fewer options to evaluate)</li>
                    </ul>
                </div>
            </section>

            <section id="consolidation-plan">
                <h2>4. Detailed Consolidation Plan</h2>

                <h3>Phase 1: Quick Wins (1-2 days)</h3>
                <div class="action-card">
                    <h4>Priority: CRITICAL | Immediate Impact</h4>
                    <ol class="action-list">
                        <li><strong>Consolidate Quick Status Tools (13 ‚Üí 1)</strong>
                            <ul style="margin-left: 30px; margin-top: 10px;">
                                <li>Create: search_jobs_by_status(status, limit) tool</li>
                                <li>Archive: 12 individual status tools to /archived</li>
                                <li>Update: Tool registry</li>
                                <li>Test: Verify status filtering works correctly</li>
                            </ul>
                        </li>
                        <li><strong>Remove Redundant Tools (2 tools)</strong>
                            <ul style="margin-left: 30px; margin-top: 10px;">
                                <li>Archive: analyze_job_attachments</li>
                                <li>Archive: search_insurance_jobs</li>
                                <li>Update: Documentation to use alternatives</li>
                            </ul>
                        </li>
                        <li><strong>Expected Impact:</strong> 111 ‚Üí 97 tools (-14 tools, 12.6% reduction)</li>
                    </ol>
                </div>

                <h3>Phase 2: Analytics Rationalization (3-5 days)</h3>
                <div class="action-card">
                    <h4>Priority: HIGH | Strategic Impact</h4>
                    <ol class="action-list">
                        <li><strong>Categorize Analytics by Value</strong>
                            <ul style="margin-left: 30px; margin-top: 10px;">
                                <li>Audit: Review actual usage of each analytics tool</li>
                                <li>Interview: Stakeholders on which reports are critical</li>
                                <li>Document: Business value for each tool</li>
                            </ul>
                        </li>
                        <li><strong>Archive Low-Value Tools (10 tools)</strong>
                            <ul style="margin-left: 30px; margin-top: 10px;">
                                <li>Move to /archived/analytics/low-value/</li>
                                <li>Document: Why archived and potential alternatives</li>
                            </ul>
                        </li>
                        <li><strong>Consolidate Territory/Job Tools (10 ‚Üí 4 tools)</strong>
                            <ul style="margin-left: 30px; margin-top: 10px;">
                                <li>Create: get_territory_analytics(analysis_type, params)</li>
                                <li>Create: get_job_analytics(analysis_type, params)</li>
                            </ul>
                        </li>
                        <li><strong>Expected Impact:</strong> 97 ‚Üí 80 tools (-17 tools, 17.5% reduction)</li>
                    </ol>
                </div>

                <h3>Phase 3: Materials Consolidation (2-3 days)</h3>
                <div class="action-card">
                    <h4>Priority: MEDIUM | Moderate Impact</h4>
                    <ol class="action-list">
                        <li><strong>Consolidate Tracking Tools (4 ‚Üí 2 tools)</strong>
                            <ul style="margin-left: 30px; margin-top: 10px;">
                                <li>Keep: get_estimate_materials</li>
                                <li>Create: get_material_analytics(type: 'costs' | 'usage' | 'inventory')</li>
                            </ul>
                        </li>
                        <li><strong>Consolidate Calculation Tools (7 ‚Üí 3 tools)</strong>
                            <ul style="margin-left: 30px; margin-top: 10px;">
                                <li>Create: calculate_construction_materials(type, measurements)</li>
                                <li>Create: optimize_materials(job_id, options)</li>
                                <li>Create: compare_materials(materials, criteria)</li>
                            </ul>
                        </li>
                        <li><strong>Expected Impact:</strong> 80 ‚Üí 74 tools (-6 tools, 7.5% reduction)</li>
                    </ol>
                </div>

                <h3>Phase 4: Native Resource Completion (3-5 days)</h3>
                <div class="action-card">
                    <h4>Priority: CRITICAL | Complete Native Coverage</h4>
                    <ol class="action-list">
                        <li><strong>Implement WorkOrders (MISSING RESOURCE)</strong>
                            <ul style="margin-left: 30px; margin-top: 10px;">
                                <li>Read: WorkOrders API documentation</li>
                                <li>Create: getWorkOrders.ts, getWorkOrder.ts</li>
                                <li>Create: createWorkOrder.ts, updateWorkOrder.ts, deleteWorkOrder.ts</li>
                                <li>Test: Full CRUD operations</li>
                                <li>Document: API coverage report</li>
                            </ul>
                        </li>
                        <li><strong>Optional: Complete Invoices/Payments CRUD</strong>
                            <ul style="margin-left: 30px; margin-top: 10px;">
                                <li>Add: update_invoice, delete_invoice</li>
                                <li>Add: update_payment, delete_payment</li>
                            </ul>
                        </li>
                        <li><strong>Expected Impact:</strong> 74 ‚Üí 83 tools (+9 tools for complete coverage)</li>
                    </ol>
                </div>

                <h3>Final Target: 83 Tools</h3>
                <div class="stats">
                    <div class="stat-card danger">
                        <div class="stat-number">111</div>
                        <div class="stat-label">Starting Point</div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-number">-37</div>
                        <div class="stat-label">Removed/Consolidated</div>
                    </div>
                    <div class="stat-card info">
                        <div class="stat-number">+9</div>
                        <div class="stat-label">Added (Native)</div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-number">83</div>
                        <div class="stat-label">Final Count (25% reduction)</div>
                    </div>
                </div>
            </section>

            <section id="implementation-roadmap">
                <h2>5. Implementation Roadmap</h2>

                <table>
                    <thead>
                        <tr>
                            <th>Phase</th>
                            <th>Duration</th>
                            <th>Tools Changed</th>
                            <th>Key Deliverables</th>
                            <th>Success Criteria</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Phase 1: Quick Wins</strong></td>
                            <td>1-2 days</td>
                            <td>-14 tools</td>
                            <td>
                                ‚Ä¢ search_jobs_by_status tool<br>
                                ‚Ä¢ Archived status tools<br>
                                ‚Ä¢ Updated registry
                            </td>
                            <td>
                                ‚Ä¢ All tests passing<br>
                                ‚Ä¢ No functionality lost<br>
                                ‚Ä¢ Build successful
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Phase 2: Analytics</strong></td>
                            <td>3-5 days</td>
                            <td>-17 tools</td>
                            <td>
                                ‚Ä¢ Usage audit report<br>
                                ‚Ä¢ Consolidated analytics tools<br>
                                ‚Ä¢ Migration guide
                            </td>
                            <td>
                                ‚Ä¢ Stakeholder approval<br>
                                ‚Ä¢ High-value tools retained<br>
                                ‚Ä¢ Documentation complete
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Phase 3: Materials</strong></td>
                            <td>2-3 days</td>
                            <td>-6 tools</td>
                            <td>
                                ‚Ä¢ Consolidated material tools<br>
                                ‚Ä¢ Updated calculations<br>
                                ‚Ä¢ Test coverage
                            </td>
                            <td>
                                ‚Ä¢ All calculations accurate<br>
                                ‚Ä¢ Performance maintained<br>
                                ‚Ä¢ Tests passing
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Phase 4: WorkOrders</strong></td>
                            <td>3-5 days</td>
                            <td>+9 tools</td>
                            <td>
                                ‚Ä¢ WorkOrders implementation<br>
                                ‚Ä¢ Full CRUD operations<br>
                                ‚Ä¢ Coverage report
                            </td>
                            <td>
                                ‚Ä¢ 100% native coverage<br>
                                ‚Ä¢ All CRUD working<br>
                                ‚Ä¢ Documentation complete
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Total</strong></td>
                            <td><strong>9-15 days</strong></td>
                            <td><strong>-28 net</strong></td>
                            <td><strong>83 optimized tools</strong></td>
                            <td><strong>25% reduction achieved</strong></td>
                        </tr>
                    </tbody>
                </table>

                <h3>Timeline Visualization</h3>
                <div class="action-card">
                    <h4>Sprint Planning (2-3 Sprints)</h4>
                    <ul class="action-list">
                        <li><strong>Sprint 1 (Week 1):</strong> Phase 1 + Start Phase 2</li>
                        <li><strong>Sprint 2 (Week 2):</strong> Complete Phase 2 + Phase 3</li>
                        <li><strong>Sprint 3 (Week 3):</strong> Phase 4 + Testing + Documentation</li>
                    </ul>
                </div>
            </section>

            <section id="risk-assessment">
                <h2>6. Risk Assessment & Mitigation</h2>

                <table>
                    <thead>
                        <tr>
                            <th>Risk</th>
                            <th>Probability</th>
                            <th>Impact</th>
                            <th>Mitigation Strategy</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Breaking Existing Integrations</strong></td>
                            <td>Medium</td>
                            <td>High</td>
                            <td>
                                ‚Ä¢ Maintain backward compatibility during transition<br>
                                ‚Ä¢ Provide migration guide with tool mappings<br>
                                ‚Ä¢ Keep deprecated tools in /archived for 90 days<br>
                                ‚Ä¢ Add deprecation warnings to old tools
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Loss of Functionality</strong></td>
                            <td>Low</td>
                            <td>High</td>
                            <td>
                                ‚Ä¢ Audit usage before archiving<br>
                                ‚Ä¢ Map all use cases to new consolidated tools<br>
                                ‚Ä¢ Comprehensive testing of consolidated tools<br>
                                ‚Ä¢ Rollback plan for each phase
                            </td>
                        </tr>
                        <tr>
                            <td><strong>User Confusion</strong></td>
                            <td>Medium</td>
                            <td>Medium</td>
                            <td>
                                ‚Ä¢ Clear migration documentation<br>
                                ‚Ä¢ Update all examples and tutorials<br>
                                ‚Ä¢ Provide parameter mapping table<br>
                                ‚Ä¢ Offer support during transition
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Performance Regression</strong></td>
                            <td>Low</td>
                            <td>Medium</td>
                            <td>
                                ‚Ä¢ Benchmark all consolidated tools<br>
                                ‚Ä¢ Monitor response times<br>
                                ‚Ä¢ Optimize parameter handling<br>
                                ‚Ä¢ Load testing before deployment
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Incomplete Native Coverage</strong></td>
                            <td>High</td>
                            <td>High</td>
                            <td>
                                ‚Ä¢ Prioritize WorkOrders implementation<br>
                                ‚Ä¢ Document all native resources<br>
                                ‚Ä¢ Create coverage matrix<br>
                                ‚Ä¢ Regular API documentation review
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h3>Success Metrics</h3>
                <div class="action-card">
                    <h4>KPIs to Track</h4>
                    <ul class="action-list">
                        <li><strong>Tool Count:</strong> Target 83 tools (25% reduction from 111)</li>
                        <li><strong>Token Usage:</strong> 20-25% reduction in tool listing size</li>
                        <li><strong>Native Coverage:</strong> 100% of 13 native resources implemented</li>
                        <li><strong>Response Time:</strong> Maintain or improve current performance</li>
                        <li><strong>User Satisfaction:</strong> No increase in support tickets</li>
                        <li><strong>Code Maintainability:</strong> Reduced complexity, clearer structure</li>
                    </ul>
                </div>

                <h3>Rollback Plan</h3>
                <div class="action-card">
                    <h4>If Issues Arise</h4>
                    <ul class="action-list">
                        <li><strong>Phase-Level Rollback:</strong> Each phase is independently reversible</li>
                        <li><strong>Archived Tools:</strong> Kept in /archived for 90 days, can be restored</li>
                        <li><strong>Git History:</strong> Each phase is a separate commit, easy to revert</li>
                        <li><strong>Feature Flags:</strong> Use flags to gradually enable consolidated tools</li>
                        <li><strong>Monitoring:</strong> Alert on error rates, response times, usage patterns</li>
                    </ul>
                </div>
            </section>

            <div class="executive-summary" style="margin-top: 40px;">
                <h2>üí° Final Recommendations</h2>
                <ol style="margin-left: 20px; margin-top: 10px;">
                    <li><strong>IMMEDIATE ACTION (Week 1):</strong> Consolidate Quick Status Tools and remove redundant tools ‚Üí 111 to 97 tools</li>
                    <li><strong>STRATEGIC REVIEW (Week 2):</strong> Audit analytics tools with stakeholders ‚Üí 97 to 80 tools</li>
                    <li><strong>CONSOLIDATION (Week 2-3):</strong> Merge materials tools ‚Üí 80 to 74 tools</li>
                    <li><strong>CRITICAL GAP (Week 3):</strong> Implement WorkOrders (missing native resource) ‚Üí 74 to 83 tools</li>
                    <li><strong>FINAL RESULT:</strong> 83 tools (25% reduction) with 100% native resource coverage</li>
                </ol>
                <br>
                <p><strong>Expected Benefits:</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>‚úÖ 25% reduction in tool count (111 ‚Üí 83)</li>
                    <li>‚úÖ 20-25% reduction in token usage</li>
                    <li>‚úÖ 100% native JobNimbus API coverage</li>
                    <li>‚úÖ Improved maintainability and clarity</li>
                    <li>‚úÖ Better AI tool selection performance</li>
                    <li>‚úÖ Clearer separation: Native API vs Business Logic</li>
                </ul>
            </div>

            <div class="timestamp">
                Report Generated: January 14, 2025 | Analysis Version: 1.0<br>
                Next Review: After Phase 1 Completion<br>
                Document Owner: Technical Architecture Team
            </div>
        </div>
    </div>
</body>
</html>